<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" th:fragment="header">
<header>
    <div>
	    <nav>
			<div class="hamburger">&#9776;</div>
	        <div class="site-title"></div>
	        <ul>
	            <li><a th:href="@{/}">Main</a></li>
	            <li><a th:href="@{/board/list(code='B001')}">Notice</a></li>
	            <li><a th:href="@{/board/list(code='B006')}">Design</a></li>
	            <li><a th:href="@{/board/read-md?iboard=10000}">About Me</a></li>
	            <li><a th:href="@{/board/read-md?iboard=10001}">Portfolio</a></li>
	            <li><a th:href="@{/board/list(code='B002')}">Study</a></li>
	            <li><a th:href="@{/board/list(code='B005')}">Daily</a></li>
	            <li><a th:href="@{/board/list(code='B004')}">Music</a></li>
	            
			    <th:block sec:authorize="hasRole('ADMIN')">
					<li><a th:href="@{/board/list(code='B007')}">Data</a></li>
			    </th:block>
			    
			    <th:block sec:authorize="isAnonymous()">
			    	<li><a th:href="@{/login}">Login</a></li>
			    </th:block>
			    
			    <th:block sec:authorize="isAuthenticated()">
			        <li><a th:href="@{/logout}">Logout</a></li>
			    </th:block>
	        </ul>
	    </nav>
	    <div class="hamburger">&#9776;</div>
    </div>
    
    <!--
    <nav>
        <div class="site-title"></div>
        <ul>
            <li><a th:href="@{/}">Main</a></li>
            <li>
	            <a href="#">Info</a>
	            <ul class="submenu">
	                <li><a th:href="@{/board/list(code='B001')}">Notice</a></li>
	                <li><a th:href="@{/board/list(code='B006')}">Design</a></li>
	            </ul>
            </li>
            <li>
            	<a href="#">About Me</a>
            	<ul class="submenu">
	                <li><a th:href="@{/board/read-md?iboard=10000}">About Me</a></li>
	                <li><a th:href="@{/board/read-md?iboard=10001}">Portfolio</a></li>
	            </ul>
            </li>
            <li>
            	<a href="#">Life</a>
            	<ul class="submenu">
	            	<th:block sec:authorize="hasRole('ADMIN')">
						<li><a th:href="@{/board/list(code='B003')}">Photo</a></li>
	            	</th:block>
	                <li><a th:href="@{/board/list(code='B002')}">Study</a></li>
		            <li><a th:href="@{/board/list(code='B005')}">Daily</a></li>
		            <li><a th:href="@{/board/list(code='B004')}">Music</a></li>
	            </ul>
            </li>
            
		    <th:block sec:authorize="hasRole('ADMIN')">
				<li>
					<a href="#">Admin</a>
					<ul class="submenu">
						<li><a th:href="@{/board/list(code='B007')}">Data</a></li>
				    </ul>
				</li>
		    </th:block>
		    
		    <th:block sec:authorize="isAnonymous()">
		    	<li><a th:href="@{/login}">Login</a></li>
		    </th:block>
		    
		    <th:block sec:authorize="isAuthenticated()">
		        <li><a th:href="@{/logout}">Logout</a></li>
		    </th:block>
        </ul>
    </nav>
    -->
</header>
<script>
let pin_yn 	   = localStorage.getItem('pin_yn');
let $hamburger = $('.hamburger');
let $nav 	   = $('nav');

$(function() {
	if(!mobile()) {
	    pin(pin_yn);
	}
});

$hamburger.click(function() {
    pin_yn = (pin_yn == null || pin_yn == 'n') ? 'y' : 'n';
    
    pin(pin_yn);
});

function mobile() {
    return window.innerWidth <= 768;
}

function pin(yn) {
    let result   = null;
    let $main    = $('main');
	let $section = $('section');
	let $footer  = $('footer');
    
    if (yn == 'n' || yn == null) {
        $nav.removeClass('open');
        $section.css('width', '100%');
        $footer.css('position', 'static');
        $footer.css('width', '100%');
    } else if (yn == 'y') {
    	let $windowWidth = $(window).width();
    	let $navWidth    = $nav.outerWidth();
        let width		 = $windowWidth - $navWidth;
        
        if(!mobile()) {
        	$footer.css('width', width + 'px');
        	$footer.css('position', 'absolute');
        	$footer.css('right', '0');
	        $section.css('width', width + 'px');
	        $main.css('display', 'flex');
	        $main.css('justify-content', 'right');
        } else {
        	$footer.css('width', '100%');
        	$footer.css('position', 'static');
        	$section.css('width', '100%');
        }

        $nav.addClass('open');
    }

    if(!mobile()) {
	    localStorage.setItem('pin_yn', yn);
    }
}
</script>
</html>