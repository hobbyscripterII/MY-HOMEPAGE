<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" th:fragment="header">
<header>
	<nav class="nav1">
	    <ul>
	        <li>
	        <a th:href="@{/}">Main</a>
	        </li>
	        <li>
	            <a href="#">Info</a>
	            <ul>
	                <li><a th:href="@{/board/list(code='B001')}">Notice</a></li>
	                <li><a th:href="@{/deploy}">Deploy</a></li>
	                <li><a th:href="@{/aboutme}">About Me</a></li>
	            </ul>
	        </li>
	        <li>
	            <a href="#">Life</a>
	            <ul>
	                <li><a th:href="@{/board/list(code='B002')}">Study</a></li>
	                <li><a th:href="@{/board/list(code='B004')}">Music</a></li>
	                <li><a th:href="@{/board/list(code='B005')}">Daily</a></li>
	            </ul>
	        </li>
	        <th:block sec:authorize="hasRole('ADMIN')">
	        <li>
	            <a href="#">Private</a>
	            <ul>
	            	<li><a th:href="@{/board/list(code='B007')}">Data</a></li>
	            </ul>
	        </li>
	        </th:block>
   	        <li>
   	        	<th:block sec:authorize="isAnonymous()"><a th:href="@{/login}">Login</a></th:block>
   	        	<th:block sec:authorize="isAuthenticated()"><a th:href="@{/logout}">Logout</a></th:block>
	        </li>
	    </ul>
	</nav>
</header>
<!--
<div class="guide-bar"></div>
-->

<script>
$(document).ready(function () {
    const $header   = $('header');
    const $guideBar = $('.guide-bar');
    const $section  = $('section');

    $('.nav1 > ul > li > a').click(function (event) {
        if ($(window).width() <= 768) {
            let $parentLi = $(this).parent('li');
            let $submenu  = $parentLi.find('ul');

            if ($submenu.is(':visible')) {
                $submenu.stop(true, true).slideUp();
            } else {
                $('.nav1 > ul > li').not($parentLi).find('ul').stop(true, true).slideUp();
                $submenu.stop(true, true).slideDown();
            }
        }
    });
    
    $(window).on('scroll', function () {
    	const $windowWidth     = $(window).width();
        const $windowHeight	   = $(window).height();
        const $docHeight	   = $(document).height();
        const $scrollTop	   = $(this).scrollTop();
        const $scrollThreshold = $windowWidth > 768 ? 200 : 100;
        const $scrollProgress  = ($scrollTop / ($docHeight - $windowHeight)) * 100;
        
        $guideBar.css('width', $scrollProgress + '%');
        
        // header 색상 변경 이벤트
        /*
        if ($scrollTop > $scrollThreshold) {
            $header.addClass('scrolled');
        } else {
            $header.removeClass('scrolled');
        }
        */
    });
});
</script>
</html>